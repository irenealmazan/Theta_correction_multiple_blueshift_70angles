function [x,y]= loadchi(name)% LOADCHI - Load x-y data from a FIT2D chi file%% Usage: loadchi(name)%% Input: name = file name (string)% Output:   X=x data%           Y=y data% Todd Hufnagel (hufnagel@jhu.edu), 25-Jul-02% 11-27-02 TCH modified to put output into global arrays X and Yglobal X YX=[];Y=[];fid=fopen(name,'r');[dch,count]=fread(fid,inf,'uchar');fclose(fid);chdat=[dch(:)',setstr(13)];% replace lf's with spaces or cr's, depending on platform% id10= find(chdat==setstr(10));% comp= computer;% if strcmp(comp(1:3),'PCW')|strcmp(comp(1:3),'VAX')|strcmp(comp(1:3),'ALP'),% 	chdat(id10)= setstr(' '*ones(1,length(id10)));% else% 	chdat(id10)= setstr(13*ones(1,length(id10)));% end% TCH 19-Aug-03 above section replaced with following% replace lf's with spaces (regardless of platform)id10= find(chdat==setstr(10));chdat(id10)= setstr(' '*ones(1,length(id10)));% data begins on fourth linedataindex=id10(4);% find all of the cr's in the dataindcr=findstr(chdat(dataindex:length(chdat)),setstr(13));% parse the datafor i=1:length(indcr)-2;	data=sscanf(chdat(indcr(i)+dataindex:indcr(i+1)-1+dataindex),'%g %g',[2 1]);    X(i)=data(1);	Y(i)=data(2);end% make into columnsY=Y(:);X=X(:);